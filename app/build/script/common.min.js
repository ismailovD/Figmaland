class NavStick {
  constructor(select) {
    this.nav = document.querySelector(select.el);
    this.rect = this.nav.getBoundingClientRect();
    this.top = this.rect.top;
    window.addEventListener('scroll', () => {
      if (pageYOffset > 0) {
        this.nav.classList.add('fixed');
      } else {
        this.nav.classList.remove('fixed');
      }
    });
  }

}

const navl = new NavStick({
  el: '.header__nav'
});

class SideBar {
  constructor(option) {
    this.nav = document.querySelector(option.el);
    this.menu = document.querySelector(option.menu);
    this.body = document.querySelector('body');
    this.nav.addEventListener('click', () => {
      this.menu.classList.add('active');
      document.addEventListener('mouseup', e => {
        if (e.target != this.menu) {
          this.menu.classList.remove('active');
        }
      });
    }, true);
    window.addEventListener('resize', () => {
      this.menu.classList.remove('active');
    });
  }

}

const navbar = new SideBar({
  el: '.burger__menu',
  menu: '.header__nav-side'
});
const panel = document.querySelector('.player__panel'),
      video = document.querySelector('.features__video'),
      videoBox = document.querySelector('.features__player'),
      playBtn = document.querySelector('.features__player-btn'),
      playTime = document.querySelector('.player__time-now'),
      fullTime = document.querySelector('.player__time-full'),
      progress = document.querySelector('.player__progress'),
      progressLine = document.querySelector('.player__progress-line'),
      progressHover = document.querySelector('.player__progress-hover'),
      playB = document.querySelector('.player__playOrPause-play'),
      pauseB = document.querySelector('.player__playOrPause-pause'),
      stopB = document.querySelector('.player__stop'),
      speedDown = document.querySelector('.player__speed-down'),
      speedUp = document.querySelector('.player__speed-up'),
      volumeOn = document.querySelector('.player__volume-on'),
      volumeOff = document.querySelector('.player__volume-off'),
      volumeLevel = document.querySelector('.player__volume-level'),
      download = document.querySelector('.player__download'),
      zoomIn = document.querySelector('.player__zoom-in'),
      zoomOut = document.querySelector('.player__zoom-out');
let speed = 1,
    playT,
    clickDisplay = 0,
    videoSrc = video.getAttribute('src');
download.setAttribute('href', videoSrc);

function videoPlay() {
  video.play();
  playB.classList.remove('active');
  pauseB.classList.add('active');
  autoplayL();
}

function videoPause() {
  video.pause();
  pauseB.classList.remove('active');
  playB.classList.add('active');
}

function videoStop() {
  video.pause();
  video.currentTime = 0;
  speed = 1;
  video.playbackRate = speed;
  pauseB.classList.remove('active');
  playB.classList.add('active');
  progressLine.style.width = "0";
  clearTimeout(playT);
}

function speedU() {
  speed *= 2;

  if (speed > 5) {
    speed = 4;
  }

  video.playbackRate = speed;
}

function speedD() {
  speed /= 2;

  if (speed < 0.2) {
    speed = 0.25;
  }

  video.playbackRate = speed;
}

function timeInSecond(even) {
  let hour = Math.floor(even / 360) < 10 ? `0${Math.floor(even / 360)}` : Math.floor(even / 360),
      minutes = Math.floor(even / 60) < 10 ? `0${Math.floor(even / 60)}` : Math.floor(even / 60),
      seconds = Math.floor(even % 60) < 10 ? `0${Math.floor(even % 60)}` : Math.floor(even % 60);

  if (hour == 0) {
    return ` ${minutes} : ${seconds} `;
  } else {
    return `${hour} : ${minutes} : ${seconds} `;
  }
}

function click() {
  if (clickDisplay == 0) {
    clickDisplay = 1;
  } else clickDisplay = 0;
}

function videoVolume(level) {
  level = level == undefined ? volumeLevel.value : level;
  video.volume = level / 100;
}

function autoplayL() {
  progressLine.style.width = `${video.currentTime * 100 / video.duration}%`;
  playTime.innerHTML = `${timeInSecond(Math.floor(video.currentTime))}`;

  if (video.currentTime == video.duration) {
    videoStop();
    clearTimeout(playT);
    return false;
  }

  playT = setTimeout(autoplayL, 1000);
}

function playL(even) {
  let w = progress.offsetWidth,
      e = even.offsetX;
  progressLine.style.width = `${e * 100 / w}%`;
  video.currentTime = video.duration * (e / w);
}

playBtn.addEventListener("click", () => {
  fullTime.innerHTML = timeInSecond(Math.floor(video.duration));
  playBtn.classList.add('active');
  setTimeout(() => {
    panel.classList.add('active');
  }, 500);
  setTimeout(videoPlay, 500);
  videoVolume();
  autoplayL();
  document.addEventListener("keydown", e => {
    if (e.keyCode == 32) {
      e.preventDefault();

      if (clickDisplay == 0) {
        videoPause();
        click();
      } else {
        videoPlay();
        click();
      }
    }
  });
}, false);
video.addEventListener('click', () => {
  if (clickDisplay == 0) {
    click();
    videoPause();
  } else if (clickDisplay == 1) {
    click();
    videoPlay();
  }
});
video.addEventListener('dblclick', e => {
  let rect = video.getBoundingClientRect(),
      left = rect.left;

  if (e.clientX > left && e.clientX < innerWidth / 2) {
    video.currentTime -= 10;
  } else if (e.clientX < innerWidth - left && e.clientX > innerWidth / 2) {
    video.currentTime += 10;
  }
});
pauseB.addEventListener('click', () => {
  videoPause();
  clearTimeout(playT);
  click();
});
playB.addEventListener('click', () => {
  videoPlay();
  autoplayL();
  click();
});
stopB.addEventListener('click', () => {
  videoStop();
});
speedDown.addEventListener('click', () => {
  speedD();
});
speedUp.addEventListener('click', () => {
  speedU();
});
volumeLevel.addEventListener('change', () => {
  videoVolume(volumeLevel.value);

  if (volumeLevel.value == 0) {
    volumeOn.classList.remove('active');
    volumeOff.classList.add('active');
  } else {
    volumeOff.classList.remove('active');
    volumeOn.classList.add('active');
  }
});
volumeOn.addEventListener('click', () => {
  videoVolume(0);
  volumeOn.classList.remove('active');
  volumeOff.classList.add('active');
});
volumeOff.addEventListener('click', () => {
  videoVolume(volumeLevel.value);
  volumeOff.classList.remove('active');
  volumeOn.classList.add('active');
});
progress.addEventListener('click', e => {
  if (clickDisplay == 0) {
    videoPause();
    playL(e);
    videoPlay();
  } else {
    playL(e);
  }
});
progress.addEventListener('mousemove', e => {
  progressHover.style.width = `${e.offsetX * 100 / progress.offsetWidth}%`;
});
progress.addEventListener('mouseleave', e => {
  progressHover.style.width = `0%`;
});
zoomIn.addEventListener('click', function () {
  toggleScreen();
});
zoomOut.addEventListener('click', function () {
  toggleScreen();
});
document.addEventListener('fullscreenchange', () => {
  if (document.fullscreenEnabled) {
    zoomIn.classList.toggle('active');
    zoomOut.classList.toggle('active');
  }

  console.log(document.fullscreenEnabled);
});

function toggleScreen() {
  if (!document.fullscreenElement) {
    videoBox.requestFullscreen();
  } else {
    if (document.fullscreenEnabled) {
      document.exitFullscreen();
    }
  }
}

const circle = document.querySelector('.progress__ring-circle'),
      loadPercent = document.querySelector('.progress__load-percent'),
      loadProgress = document.querySelector('.progress__load'),
      body = document.querySelector('body'),
      nav = document.querySelector('.header__nav'),
      radius = circle.r.baseVal.value,
      circleC = Math.round(2 * Math.PI * radius);
circle.style.strokeDasharray = `${circleC} ${circleC}`;
circle.style.strokeDashoffset = circleC;
loadProgress.addEventListener('click', () => {});
document.addEventListener('scroll', () => {
  let windowScroll = pageYOffset,
      windowHeight = document.documentElement.scrollHeight - document.documentElement.clientHeight,
      percent = Math.round(windowScroll / windowHeight * 100);

  if (pageYOffset == 0) {
    loadProgress.style.display = "none";
  } else loadProgress.style.display = "flex";

  loadPercent.innerHTML = percent == 0 ? "" : `${percent}%`;
  circleLoad(percent);
});

function circleLoad(percent) {
  let part = circleC - percent / 100 * circleC;
  circle.style.strokeDashoffset = part;
}
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImNvbXBvbmVudHMvbmF2LXN0aWNraW5nLmpzIiwibWFpbi5qcyIsImNvbXBvbmVudHMvc2lkZS1iYXIuanMiLCJjb21wb25lbnRzL3ZpZGVvLXBsYXllci5qcyJdLCJuYW1lcyI6WyJOYXZTdGljayIsImNvbnN0cnVjdG9yIiwic2VsZWN0IiwibmF2IiwiZG9jdW1lbnQiLCJxdWVyeVNlbGVjdG9yIiwiZWwiLCJyZWN0IiwiZ2V0Qm91bmRpbmdDbGllbnRSZWN0IiwidG9wIiwid2luZG93IiwiYWRkRXZlbnRMaXN0ZW5lciIsInBhZ2VZT2Zmc2V0IiwiY2xhc3NMaXN0IiwiYWRkIiwicmVtb3ZlIiwibmF2bCIsIlNpZGVCYXIiLCJvcHRpb24iLCJtZW51IiwiYm9keSIsImUiLCJ0YXJnZXQiLCJuYXZiYXIiLCJwYW5lbCIsInZpZGVvIiwidmlkZW9Cb3giLCJwbGF5QnRuIiwicGxheVRpbWUiLCJmdWxsVGltZSIsInByb2dyZXNzIiwicHJvZ3Jlc3NMaW5lIiwicHJvZ3Jlc3NIb3ZlciIsInBsYXlCIiwicGF1c2VCIiwic3RvcEIiLCJzcGVlZERvd24iLCJzcGVlZFVwIiwidm9sdW1lT24iLCJ2b2x1bWVPZmYiLCJ2b2x1bWVMZXZlbCIsImRvd25sb2FkIiwiem9vbUluIiwiem9vbU91dCIsInNwZWVkIiwicGxheVQiLCJjbGlja0Rpc3BsYXkiLCJ2aWRlb1NyYyIsImdldEF0dHJpYnV0ZSIsInNldEF0dHJpYnV0ZSIsInZpZGVvUGxheSIsInBsYXkiLCJhdXRvcGxheUwiLCJ2aWRlb1BhdXNlIiwicGF1c2UiLCJ2aWRlb1N0b3AiLCJjdXJyZW50VGltZSIsInBsYXliYWNrUmF0ZSIsInN0eWxlIiwid2lkdGgiLCJjbGVhclRpbWVvdXQiLCJzcGVlZFUiLCJzcGVlZEQiLCJ0aW1lSW5TZWNvbmQiLCJldmVuIiwiaG91ciIsIk1hdGgiLCJmbG9vciIsIm1pbnV0ZXMiLCJzZWNvbmRzIiwiY2xpY2siLCJ2aWRlb1ZvbHVtZSIsImxldmVsIiwidW5kZWZpbmVkIiwidmFsdWUiLCJ2b2x1bWUiLCJkdXJhdGlvbiIsImlubmVySFRNTCIsInNldFRpbWVvdXQiLCJwbGF5TCIsInciLCJvZmZzZXRXaWR0aCIsIm9mZnNldFgiLCJrZXlDb2RlIiwicHJldmVudERlZmF1bHQiLCJsZWZ0IiwiY2xpZW50WCIsImlubmVyV2lkdGgiLCJ0b2dnbGVTY3JlZW4iLCJmdWxsc2NyZWVuRW5hYmxlZCIsInRvZ2dsZSIsImNvbnNvbGUiLCJsb2ciLCJmdWxsc2NyZWVuRWxlbWVudCIsInJlcXVlc3RGdWxsc2NyZWVuIiwiZXhpdEZ1bGxzY3JlZW4iLCJjaXJjbGUiLCJsb2FkUGVyY2VudCIsImxvYWRQcm9ncmVzcyIsInJhZGl1cyIsInIiLCJiYXNlVmFsIiwiY2lyY2xlQyIsInJvdW5kIiwiUEkiLCJzdHJva2VEYXNoYXJyYXkiLCJzdHJva2VEYXNob2Zmc2V0Iiwid2luZG93U2Nyb2xsIiwid2luZG93SGVpZ2h0IiwiZG9jdW1lbnRFbGVtZW50Iiwic2Nyb2xsSGVpZ2h0IiwiY2xpZW50SGVpZ2h0IiwicGVyY2VudCIsImRpc3BsYXkiLCJjaXJjbGVMb2FkIiwicGFydCJdLCJtYXBwaW5ncyI6IkFBQUEsTUFBQUEsUUFBQSxDQUFBO0FBQ0FDLEVBQUFBLFdBQUEsQ0FBQUMsTUFBQSxFQUFBO0FBQ0EsU0FBQUMsR0FBQSxHQUFBQyxRQUFBLENBQUFDLGFBQUEsQ0FBQUgsTUFBQSxDQUFBSSxFQUFBLENBQUE7QUFDQSxTQUFBQyxJQUFBLEdBQUEsS0FBQUosR0FBQSxDQUFBSyxxQkFBQSxFQUFBO0FBQ0EsU0FBQUMsR0FBQSxHQUFBLEtBQUFGLElBQUEsQ0FBQUUsR0FBQTtBQUVBQyxJQUFBQSxNQUFBLENBQUFDLGdCQUFBLENBQUEsUUFBQSxFQUFBLE1BQUE7QUFDQSxVQUFBQyxXQUFBLEdBQUEsQ0FBQSxFQUFBO0FBQ0EsYUFBQVQsR0FBQSxDQUFBVSxTQUFBLENBQUFDLEdBQUEsQ0FBQSxPQUFBO0FBQ0EsT0FGQSxNQUVBO0FBQ0EsYUFBQVgsR0FBQSxDQUFBVSxTQUFBLENB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QUFBZ0QsZ0JBQUEsR0FBQUosT0FBQTtBQUVBSixZQUFBLENBQUF2RixnQkFBQSxDQUFBLE9BQUEsRUFBQSxNQUFBLENBRUEsQ0FGQTtBQUlBUCxRQUFBLENBQUFPLGdCQUFBLENBQUEsUUFBQSxFQUFBLE1BQUE7QUFDQSxNQUFBZ0csWUFBQSxHQUFBL0YsV0FBQTtBQUFBLE1BQ0FnRyxZQUFBLEdBQUF4RyxRQUFBLENBQUF5RyxlQUFBLENBQUFDLFlBQUEsR0FBQTFHLFFBQUEsQ0FBQXlHLGVBQUEsQ0FBQUUsWUFEQTtBQUFBLE1BRUFDLE9BQUEsR0FBQTlDLElBQUEsQ0FBQXFDLEtBQUEsQ0FBQUksWUFBQSxHQUFBQyxZQUFBLEdBQUEsR0FBQSxDQUZBOztBQUdBLE1BQUFoRyxXQUFBLElBQUEsQ0FBQSxFQUFBO0FBQ0FzRixJQUFBQSxZQUFBLENBQUF4QyxLQUFBLENBQUF1RCxPQUFBLEdBQUEsTUFBQTtBQUNBLEdBRkEsTUFFQWYsWUFBQSxDQUFBeEMsS0FBQSxDQUFBdUQsT0FBQSxHQUFBLE1BQUE7O0FBQ0FoQixFQUFBQSxXQUFBLENBQUFwQixTQUFBLEdBQUFtQyxPQUFBLElBQUEsQ0FBQSxHQUFBLEVBQUEsR0FBQSxHQUFBQSxPQUFBLEdBQUE7QUFDQUUsRUFBQUEsVUFBQSxDQUFBRixPQUFBLENBQUE7QUFDQSxDQVRBOztBQVdBLFNBQUFFLFVBQUEsQ0FBQUYsT0FBQSxFQUFBO0FBQ0EsTUFBQUcsSUFBQSxHQUFBYixPQUFBLEdBQUFVLE9BQUEsR0FBQSxHQUFBLEdBQUFWLE9BQUE7QUFDQU4sRUFBQUEsTUFBQSxDQUFBdEMsS0FBQSxDQUFBZ0QsZ0JBQUEsR0FBQVMsSUFBQTtBQUNBIiwiZmlsZSI6ImNvbW1vbi5taW4uanMiLCJzb3VyY2VzQ29udGVudCI6WyJjbGFzcyBOYXZTdGljayB7XHJcbiAgICBjb25zdHJ1Y3RvcihzZWxlY3QpIHtcclxuICAgICAgICB0aGlzLm5hdiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3Ioc2VsZWN0LmVsKTtcclxuICAgICAgICB0aGlzLnJlY3QgPSB0aGlzLm5hdi5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcclxuICAgICAgICB0aGlzLnRvcCA9IHRoaXMucmVjdC50b3A7XHJcbiAgICAgICAgXHJcbiAgICAgICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ3Njcm9sbCcsICgpPT4geyBcclxuICAgICAgICAgICAgaWYocGFnZVlPZmZzZXQgPiAwICkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5uYXYuY2xhc3NMaXN0LmFkZCgnZml4ZWQnKSBcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHRoaXMubmF2LmNsYXNzTGlzdC5yZW1vdmUoJ2ZpeGVkJylcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pICAgXHJcbiAgICB9XHJcbn1cclxuXHJcbmNvbnN0IG5hdmwgPSBuZXcgTmF2U3RpY2sgKHtcclxuICAgIGVsOiAnLmhlYWRlcl9fbmF2J1xyXG59KVxyXG4gXHJcbiAiLCJjbGFzcyBOYXZTdGljayB7XHJcbiAgICBjb25zdHJ1Y3RvcihzZWxlY3QpIHtcclxuICAgICAgICB0aGlzLm5hdiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3Ioc2VsZWN0LmVsKTtcclxuICAgICAgICB0aGlzLnJlY3QgPSB0aGlzLm5hdi5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcclxuICAgICAgICB0aGlzLnRvcCA9IHRoaXMucmVjdC50b3A7XHJcbiAgICAgICAgXHJcbiAgICAgICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ3Njcm9sbCcsICgpPT4geyBcclxuICAgICAgICAgICAgaWYocGFnZVlPZmZzZXQgPiAwICkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5uYXYuY2xhc3NMaXN0LmFkZCgnZml4ZWQnKSBcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHRoaXMubmF2LmNsYXNzTGlzdC5yZW1vdmUoJ2ZpeGVkJylcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pICAgXHJcbiAgICB9XHJcbn1cclxuXHJcbmNvbnN0IG5hdmwgPSBuZXcgTmF2U3RpY2sgKHtcclxuICAgIGVsOiAnLmhlYWRlcl9fbmF2J1xyXG59KVxyXG4gXHJcbiBcclxuY2xhc3MgU2lkZUJhciAge1xyXG4gICAgY29uc3RydWN0b3Iob3B0aW9uKSB7XHJcbiAgICAgICAgdGhpcy5uYXYgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKG9wdGlvbi5lbCk7XHJcbiAgICAgICAgdGhpcy5tZW51ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihvcHRpb24ubWVudSk7XHJcbiAgICAgICAgdGhpcy5ib2R5ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignYm9keScpO1xyXG4gICAgICAgIHRoaXMubmF2LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCk9PiB7XHJcbiAgICAgICAgICAgIHRoaXMubWVudS5jbGFzc0xpc3QuYWRkKCdhY3RpdmUnKTsgXHJcbiAgICAgICAgICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNldXAnLCAoZSk9PiB7XHJcbiAgICAgICAgICAgICAgICBpZihlLnRhcmdldCAhPSB0aGlzLm1lbnUpIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLm1lbnUuY2xhc3NMaXN0LnJlbW92ZSgnYWN0aXZlJyk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgfSwgdHJ1ZSkgIFxyXG4gICAgICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdyZXNpemUnLCAoKT0+IHsgXHJcbiAgICAgICAgICAgIHRoaXMubWVudS5jbGFzc0xpc3QucmVtb3ZlKCdhY3RpdmUnKTtcclxuICAgICAgICB9KVxyXG4gICAgfVxyXG59XHJcblxyXG5jb25zdCBuYXZiYXIgPSBuZXcgU2lkZUJhciAoe1xyXG4gICAgZWw6ICcuYnVyZ2VyX19tZW51JyxcclxuICAgIG1lbnU6ICcuaGVhZGVyX19uYXYtc2lkZSdcclxufSlcclxuIFxyXG5jb25zdCBwYW5lbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wbGF5ZXJfX3BhbmVsJyksXHJcbiAgICB2aWRlbyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5mZWF0dXJlc19fdmlkZW8nKSxcclxuICAgIHZpZGVvQm94ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmZlYXR1cmVzX19wbGF5ZXInKSxcclxuICAgIHBsYXlCdG4gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuZmVhdHVyZXNfX3BsYXllci1idG4nKSxcclxuICAgIHBsYXlUaW1lID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnBsYXllcl9fdGltZS1ub3cnKSxcclxuICAgIGZ1bGxUaW1lID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnBsYXllcl9fdGltZS1mdWxsJyksXHJcbiAgICBwcm9ncmVzcyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wbGF5ZXJfX3Byb2dyZXNzJyksXHJcbiAgICBwcm9ncmVzc0xpbmUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucGxheWVyX19wcm9ncmVzcy1saW5lJyksXHJcbiAgICBwcm9ncmVzc0hvdmVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnBsYXllcl9fcHJvZ3Jlc3MtaG92ZXInKSxcclxuICAgIHBsYXlCID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnBsYXllcl9fcGxheU9yUGF1c2UtcGxheScpLFxyXG4gICAgcGF1c2VCID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnBsYXllcl9fcGxheU9yUGF1c2UtcGF1c2UnKSxcclxuICAgIHN0b3BCID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnBsYXllcl9fc3RvcCcpLFxyXG4gICAgc3BlZWREb3duID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnBsYXllcl9fc3BlZWQtZG93bicpLFxyXG4gICAgc3BlZWRVcCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wbGF5ZXJfX3NwZWVkLXVwJyksXHJcbiAgICB2b2x1bWVPbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wbGF5ZXJfX3ZvbHVtZS1vbicpLFxyXG4gICAgdm9sdW1lT2ZmID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnBsYXllcl9fdm9sdW1lLW9mZicpLFxyXG4gICAgdm9sdW1lTGV2ZWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucGxheWVyX192b2x1bWUtbGV2ZWwnKSxcclxuICAgIGRvd25sb2FkID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnBsYXllcl9fZG93bmxvYWQnKSxcclxuICAgIHpvb21JbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wbGF5ZXJfX3pvb20taW4nKSxcclxuICAgIHpvb21PdXQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucGxheWVyX196b29tLW91dCcpO1xyXG5cclxubGV0IHNwZWVkID0gMSxcclxuICAgIHBsYXlULFxyXG4gICAgY2xpY2tEaXNwbGF5ID0gMCxcclxuICAgIHZpZGVvU3JjID0gdmlkZW8uZ2V0QXR0cmlidXRlKCdzcmMnKTtcclxuZG93bmxvYWQuc2V0QXR0cmlidXRlKCdocmVmJywgdmlkZW9TcmMpO1xyXG5mdW5jdGlvbiB2aWRlb1BsYXkoKSB7XHJcbiAgICB2aWRlby5wbGF5KCk7XHJcbiAgICBwbGF5Qi5jbGFzc0xpc3QucmVtb3ZlKCdhY3RpdmUnKTtcclxuICAgIHBhdXNlQi5jbGFzc0xpc3QuYWRkKCdhY3RpdmUnKTtcclxuICAgIGF1dG9wbGF5TCgpO1xyXG59XHJcblxyXG5mdW5jdGlvbiB2aWRlb1BhdXNlKCkge1xyXG4gICAgdmlkZW8ucGF1c2UoKTtcclxuICAgIHBhdXNlQi5jbGFzc0xpc3QucmVtb3ZlKCdhY3RpdmUnKTtcclxuICAgIHBsYXlCLmNsYXNzTGlzdC5hZGQoJ2FjdGl2ZScpO1xyXG59XHJcblxyXG5mdW5jdGlvbiB2aWRlb1N0b3AoKSB7XHJcbiAgICB2aWRlby5wYXVzZSgpO1xyXG4gICAgdmlkZW8uY3VycmVudFRpbWUgPSAwO1xyXG4gICAgc3BlZWQgPSAxO1xyXG4gICAgdmlkZW8ucGxheWJhY2tSYXRlID0gc3BlZWQ7XHJcbiAgICBwYXVzZUIuY2xhc3NMaXN0LnJlbW92ZSgnYWN0aXZlJyk7XHJcbiAgICBwbGF5Qi5jbGFzc0xpc3QuYWRkKCdhY3RpdmUnKTtcclxuICAgIHByb2dyZXNzTGluZS5zdHlsZS53aWR0aCA9IFwiMFwiO1xyXG4gICAgY2xlYXJUaW1lb3V0KHBsYXlUKTtcclxufVxyXG5cclxuZnVuY3Rpb24gc3BlZWRVKCkge1xyXG4gICAgc3BlZWQgKj0gMjtcclxuICAgIGlmIChzcGVlZCA+IDUpIHtcclxuICAgICAgICBzcGVlZCA9IDQ7XHJcbiAgICB9XHJcbiAgICB2aWRlby5wbGF5YmFja1JhdGUgPSBzcGVlZDtcclxufVxyXG5mdW5jdGlvbiBzcGVlZEQoKSB7XHJcbiAgICBzcGVlZCAvPSAyO1xyXG4gICAgaWYgKHNwZWVkIDwgMC4yKSB7XHJcbiAgICAgICAgc3BlZWQgPSAwLjI1O1xyXG4gICAgfVxyXG4gICAgdmlkZW8ucGxheWJhY2tSYXRlID0gc3BlZWQ7XHJcbn1cclxuZnVuY3Rpb24gdGltZUluU2Vjb25kKGV2ZW4pIHtcclxuICAgIGxldCBob3VyID0gTWF0aC5mbG9vcihldmVuIC8gMzYwKSA8IDEwID8gYDAke01hdGguZmxvb3IoZXZlbiAvIDM2MCl9YCA6IE1hdGguZmxvb3IoZXZlbiAvIDM2MCksXHJcbiAgICAgICAgbWludXRlcyA9IE1hdGguZmxvb3IoZXZlbiAvIDYwKSA8IDEwID8gYDAke01hdGguZmxvb3IoZXZlbiAvIDYwKX1gIDogTWF0aC5mbG9vcihldmVuIC8gNjApLFxyXG4gICAgICAgIHNlY29uZHMgPSBNYXRoLmZsb29yKGV2ZW4gJSA2MCkgPCAxMCA/IGAwJHtNYXRoLmZsb29yKGV2ZW4gJSA2MCl9YCA6IE1hdGguZmxvb3IoZXZlbiAlIDYwKTtcclxuICAgIGlmIChob3VyID09IDApIHtcclxuICAgICAgICByZXR1cm4gYCAke21pbnV0ZXN9IDogJHtzZWNvbmRzfSBgO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgICByZXR1cm4gYCR7aG91cn0gOiAke21pbnV0ZXN9IDogJHtzZWNvbmRzfSBgO1xyXG4gICAgfVxyXG59XHJcbmZ1bmN0aW9uIGNsaWNrKCkge1xyXG4gICAgaWYgKGNsaWNrRGlzcGxheSA9PSAwKSB7XHJcbiAgICAgICAgY2xpY2tEaXNwbGF5ID0gMVxyXG4gICAgfSBlbHNlIGNsaWNrRGlzcGxheSA9IDBcclxufVxyXG5cclxuZnVuY3Rpb24gdmlkZW9Wb2x1bWUobGV2ZWwpIHtcclxuICAgIGxldmVsID0gbGV2ZWwgPT0gdW5kZWZpbmVkID8gdm9sdW1lTGV2ZWwudmFsdWUgOiBsZXZlbDtcclxuICAgIHZpZGVvLnZvbHVtZSA9IGxldmVsIC8gMTAwO1xyXG59XHJcbmZ1bmN0aW9uIGF1dG9wbGF5TCgpIHtcclxuICAgIHByb2dyZXNzTGluZS5zdHlsZS53aWR0aCA9IGAkeyh2aWRlby5jdXJyZW50VGltZSAqIDEwMCkgLyB2aWRlby5kdXJhdGlvbn0lYDtcclxuICAgIHBsYXlUaW1lLmlubmVySFRNTCA9IGAke3RpbWVJblNlY29uZChNYXRoLmZsb29yKHZpZGVvLmN1cnJlbnRUaW1lKSl9YDtcclxuXHJcbiAgICBpZiAodmlkZW8uY3VycmVudFRpbWUgPT0gdmlkZW8uZHVyYXRpb24pIHtcclxuICAgICAgICB2aWRlb1N0b3AoKVxyXG4gICAgICAgIGNsZWFyVGltZW91dChwbGF5VCk7XHJcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgfVxyXG4gICAgcGxheVQgPSBzZXRUaW1lb3V0KGF1dG9wbGF5TCwgMTAwMCk7XHJcblxyXG59XHJcbmZ1bmN0aW9uIHBsYXlMKGV2ZW4pIHtcclxuICAgIGxldCB3ID0gcHJvZ3Jlc3Mub2Zmc2V0V2lkdGgsXHJcbiAgICAgICAgZSA9IGV2ZW4ub2Zmc2V0WDtcclxuICAgIHByb2dyZXNzTGluZS5zdHlsZS53aWR0aCA9IGAkeyhlICogMTAwKSAvIHd9JWA7XHJcbiAgICB2aWRlby5jdXJyZW50VGltZSA9IHZpZGVvLmR1cmF0aW9uICogKGUgLyB3KTtcclxufVxyXG5wbGF5QnRuLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XHJcbiAgICBmdWxsVGltZS5pbm5lckhUTUwgPSB0aW1lSW5TZWNvbmQoTWF0aC5mbG9vcih2aWRlby5kdXJhdGlvbikpO1xyXG4gICAgcGxheUJ0bi5jbGFzc0xpc3QuYWRkKCdhY3RpdmUnKTtcclxuICAgIHNldFRpbWVvdXQoKCkgPT4geyBwYW5lbC5jbGFzc0xpc3QuYWRkKCdhY3RpdmUnKSB9LCA1MDApO1xyXG4gICAgc2V0VGltZW91dCh2aWRlb1BsYXksIDUwMCk7XHJcbiAgICB2aWRlb1ZvbHVtZSgpO1xyXG4gICAgYXV0b3BsYXlMKCk7XHJcbiAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwia2V5ZG93blwiLCAoZSkgPT4ge1xyXG4gICAgICAgIGlmIChlLmtleUNvZGUgPT0gMzIgKSB7XHJcbiAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgICAgICAgaWYgKGNsaWNrRGlzcGxheSA9PSAwKSB7XHJcbiAgICAgICAgICAgICAgICB2aWRlb1BhdXNlKCk7XHJcbiAgICAgICAgICAgICAgICBjbGljaygpO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgdmlkZW9QbGF5KCk7XHJcbiAgICAgICAgICAgICAgICBjbGljaygpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSBcclxuICAgIH0pXHJcbn0sIGZhbHNlKVxyXG52aWRlby5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcclxuICAgIGlmIChjbGlja0Rpc3BsYXkgPT0gMCkge1xyXG4gICAgICAgIGNsaWNrKCk7XHJcbiAgICAgICAgdmlkZW9QYXVzZSgpO1xyXG4gICAgfSBlbHNlIGlmIChjbGlja0Rpc3BsYXkgPT0gMSkge1xyXG4gICAgICAgIGNsaWNrKCk7XHJcbiAgICAgICAgdmlkZW9QbGF5KCk7XHJcbiAgICB9XHJcbn0pXHJcblxyXG52aWRlby5hZGRFdmVudExpc3RlbmVyKCdkYmxjbGljaycsIChlKSA9PiB7XHJcbiAgICBsZXQgcmVjdCA9IHZpZGVvLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLFxyXG4gICAgICAgIGxlZnQgPSByZWN0LmxlZnQ7XHJcbiAgICBpZiAoZS5jbGllbnRYID4gbGVmdCAmJiBlLmNsaWVudFggPCBpbm5lcldpZHRoIC8gMikge1xyXG4gICAgICAgIHZpZGVvLmN1cnJlbnRUaW1lIC09IDEwXHJcbiAgICB9IGVsc2UgaWYgKGUuY2xpZW50WCA8IGlubmVyV2lkdGggLSBsZWZ0ICYmIGUuY2xpZW50WCA+IGlubmVyV2lkdGggLyAyKSB7XHJcbiAgICAgICAgdmlkZW8uY3VycmVudFRpbWUgKz0gMTBcclxuICAgIH1cclxuXHJcbn0pXHJcblxyXG5wYXVzZUIuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XHJcbiAgICB2aWRlb1BhdXNlKCk7XHJcbiAgICBjbGVhclRpbWVvdXQocGxheVQpO1xyXG4gICAgY2xpY2soKTtcclxufSlcclxuXHJcbnBsYXlCLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xyXG4gICAgdmlkZW9QbGF5KCk7XHJcbiAgICBhdXRvcGxheUwoKTtcclxuICAgIGNsaWNrKCk7XHJcbn0pXHJcblxyXG5zdG9wQi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcclxuICAgIHZpZGVvU3RvcCgpO1xyXG59KVxyXG5cclxuc3BlZWREb3duLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xyXG4gICAgc3BlZWREKCk7XHJcbn0pXHJcbnNwZWVkVXAuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XHJcbiAgICBzcGVlZFUoKTtcclxufSlcclxuXHJcbnZvbHVtZUxldmVsLmFkZEV2ZW50TGlzdGVuZXIoJ2NoYW5nZScsICgpID0+IHtcclxuICAgIHZpZGVvVm9sdW1lKHZvbHVtZUxldmVsLnZhbHVlKTtcclxuICAgIGlmICh2b2x1bWVMZXZlbC52YWx1ZSA9PSAwKSB7XHJcbiAgICAgICAgdm9sdW1lT24uY2xhc3NMaXN0LnJlbW92ZSgnYWN0aXZlJyk7XHJcbiAgICAgICAgdm9sdW1lT2ZmLmNsYXNzTGlzdC5hZGQoJ2FjdGl2ZScpO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgICB2b2x1bWVPZmYuY2xhc3NMaXN0LnJlbW92ZSgnYWN0aXZlJyk7XHJcbiAgICAgICAgdm9sdW1lT24uY2xhc3NMaXN0LmFkZCgnYWN0aXZlJyk7XHJcbiAgICB9XHJcbn0pXHJcblxyXG52b2x1bWVPbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcclxuICAgIHZpZGVvVm9sdW1lKDApO1xyXG4gICAgdm9sdW1lT24uY2xhc3NMaXN0LnJlbW92ZSgnYWN0aXZlJyk7XHJcbiAgICB2b2x1bWVPZmYuY2xhc3NMaXN0LmFkZCgnYWN0aXZlJyk7XHJcbn0pXHJcblxyXG52b2x1bWVPZmYuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XHJcbiAgICB2aWRlb1ZvbHVtZSh2b2x1bWVMZXZlbC52YWx1ZSk7XHJcbiAgICB2b2x1bWVPZmYuY2xhc3NMaXN0LnJlbW92ZSgnYWN0aXZlJyk7XHJcbiAgICB2b2x1bWVPbi5jbGFzc0xpc3QuYWRkKCdhY3RpdmUnKTtcclxufSlcclxuXHJcbnByb2dyZXNzLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKGUpID0+IHtcclxuICAgIGlmIChjbGlja0Rpc3BsYXkgPT0gMCkge1xyXG4gICAgICAgIHZpZGVvUGF1c2UoKTtcclxuICAgICAgICBwbGF5TChlKTtcclxuICAgICAgICB2aWRlb1BsYXkoKTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgICAgcGxheUwoZSk7XHJcbiAgICB9XHJcblxyXG59KVxyXG5cclxucHJvZ3Jlc3MuYWRkRXZlbnRMaXN0ZW5lcignbW91c2Vtb3ZlJywgKGUpID0+IHtcclxuICAgIHByb2dyZXNzSG92ZXIuc3R5bGUud2lkdGggPSBgJHsoZS5vZmZzZXRYICogMTAwKSAvIHByb2dyZXNzLm9mZnNldFdpZHRofSVgO1xyXG59KVxyXG5wcm9ncmVzcy5hZGRFdmVudExpc3RlbmVyKCdtb3VzZWxlYXZlJywgKGUpID0+IHtcclxuICAgIHByb2dyZXNzSG92ZXIuc3R5bGUud2lkdGggPSBgMCVgO1xyXG59KVxyXG5cclxuem9vbUluLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZnVuY3Rpb24gKCkge1xyXG4gICAgdG9nZ2xlU2NyZWVuKCk7IFxyXG59KVxyXG56b29tT3V0LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZnVuY3Rpb24gKCkge1xyXG4gICAgdG9nZ2xlU2NyZWVuKCk7IFxyXG59KVxyXG5kb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdmdWxsc2NyZWVuY2hhbmdlJywgKCk9PiB7XHJcbiAgICBpZiAoZG9jdW1lbnQuZnVsbHNjcmVlbkVuYWJsZWQpIHtcclxuICAgICAgICB6b29tSW4uY2xhc3NMaXN0LnRvZ2dsZSgnYWN0aXZlJyk7XHJcbiAgICAgICAgem9vbU91dC5jbGFzc0xpc3QudG9nZ2xlKCdhY3RpdmUnKTtcclxuICAgIH1cclxuICAgIGNvbnNvbGUubG9nKGRvY3VtZW50LmZ1bGxzY3JlZW5FbmFibGVkICApO1xyXG59KVxyXG5cclxuZnVuY3Rpb24gdG9nZ2xlU2NyZWVuKCkge1xyXG4gICAgIFxyXG4gICAgaWYgKCFkb2N1bWVudC5mdWxsc2NyZWVuRWxlbWVudCkge1xyXG4gICAgICAgIHZpZGVvQm94LnJlcXVlc3RGdWxsc2NyZWVuKCk7IFxyXG4gICAgfSBlbHNlIHtcclxuICAgICAgICBpZiAoZG9jdW1lbnQuZnVsbHNjcmVlbkVuYWJsZWQpIHtcclxuICAgICAgICAgICAgZG9jdW1lbnQuZXhpdEZ1bGxzY3JlZW4oKTsgXHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XHJcbmNvbnN0ICAgY2lyY2xlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnByb2dyZXNzX19yaW5nLWNpcmNsZScpLFxyXG4gICAgICAgIGxvYWRQZXJjZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnByb2dyZXNzX19sb2FkLXBlcmNlbnQnKSwgXHJcbiAgICAgICAgbG9hZFByb2dyZXNzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnByb2dyZXNzX19sb2FkJyksIFxyXG4gICAgICAgIGJvZHkgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdib2R5JyksXHJcbiAgICAgICAgbmF2ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmhlYWRlcl9fbmF2JyksXHJcbiAgICAgICAgcmFkaXVzID0gY2lyY2xlLnIuYmFzZVZhbC52YWx1ZSxcclxuICAgICAgICBjaXJjbGVDID0gTWF0aC5yb3VuZCgyICogTWF0aC5QSSAqIHJhZGl1cyk7IFxyXG5jaXJjbGUuc3R5bGUuc3Ryb2tlRGFzaGFycmF5ID0gYCR7Y2lyY2xlQ30gJHtjaXJjbGVDfWA7IFxyXG5jaXJjbGUuc3R5bGUuc3Ryb2tlRGFzaG9mZnNldCA9IGNpcmNsZUMgOyBcclxuXHJcbmxvYWRQcm9ncmVzcy5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpPT4geyBcclxuICAgIFxyXG59KVxyXG5cclxuZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignc2Nyb2xsJyAsICgpPT4geyAgIFxyXG4gICAgbGV0IHdpbmRvd1Njcm9sbCA9IHBhZ2VZT2Zmc2V0LFxyXG4gICAgICAgIHdpbmRvd0hlaWdodCA9IGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5zY3JvbGxIZWlnaHQgLSBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuY2xpZW50SGVpZ2h0LFxyXG4gICAgICAgIHBlcmNlbnQgPSBNYXRoLnJvdW5kKHdpbmRvd1Njcm9sbCAvIHdpbmRvd0hlaWdodCAqIDEwMCk7XHJcbiAgICBpZihwYWdlWU9mZnNldCA9PSAwICl7XHJcbiAgICAgICAgbG9hZFByb2dyZXNzLnN0eWxlLmRpc3BsYXkgPSBcIm5vbmVcIiBcclxuICAgIH0gZWxzZSAgbG9hZFByb2dyZXNzLnN0eWxlLmRpc3BsYXkgPSBcImZsZXhcIiBcclxuICAgIGxvYWRQZXJjZW50LmlubmVySFRNTCA9ICBwZXJjZW50ICA9PSAwID8gXCJcIiA6IGAkeyBwZXJjZW50fSVgO1xyXG4gICAgY2lyY2xlTG9hZChwZXJjZW50KTtcclxufSlcclxuICAgIFxyXG4gZnVuY3Rpb24gY2lyY2xlTG9hZChwZXJjZW50KSB7XHJcbiAgICAgbGV0IHBhcnQgPSBjaXJjbGVDIC0gcGVyY2VudCAvIDEwMCAqIGNpcmNsZUM7XHJcbiAgICAgY2lyY2xlLnN0eWxlLnN0cm9rZURhc2hvZmZzZXQgPSBwYXJ0IDtcclxuICAgfVxyXG4gXHJcblxyXG5cclxuXHJcbiBcclxuIiwiY2xhc3MgU2lkZUJhciAge1xyXG4gICAgY29uc3RydWN0b3Iob3B0aW9uKSB7XHJcbiAgICAgICAgdGhpcy5uYXYgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKG9wdGlvbi5lbCk7XHJcbiAgICAgICAgdGhpcy5tZW51ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihvcHRpb24ubWVudSk7XHJcbiAgICAgICAgdGhpcy5ib2R5ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignYm9keScpO1xyXG4gICAgICAgIHRoaXMubmF2LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCk9PiB7XHJcbiAgICAgICAgICAgIHRoaXMubWVudS5jbGFzc0xpc3QuYWRkKCdhY3RpdmUnKTsgXHJcbiAgICAgICAgICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNldXAnLCAoZSk9PiB7XHJcbiAgICAgICAgICAgICAgICBpZihlLnRhcmdldCAhPSB0aGlzLm1lbnUpIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLm1lbnUuY2xhc3NMaXN0LnJlbW92ZSgnYWN0aXZlJyk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgfSwgdHJ1ZSkgIFxyXG4gICAgICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdyZXNpemUnLCAoKT0+IHsgXHJcbiAgICAgICAgICAgIHRoaXMubWVudS5jbGFzc0xpc3QucmVtb3ZlKCdhY3RpdmUnKTtcclxuICAgICAgICB9KVxyXG4gICAgfVxyXG59XHJcblxyXG5jb25zdCBuYXZiYXIgPSBuZXcgU2lkZUJhciAoe1xyXG4gICAgZWw6ICcuYnVyZ2VyX19tZW51JyxcclxuICAgIG1lbnU6ICcuaGVhZGVyX19uYXYtc2lkZSdcclxufSlcclxuICIsImNvbnN0IHBhbmVsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnBsYXllcl9fcGFuZWwnKSxcclxuICAgIHZpZGVvID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmZlYXR1cmVzX192aWRlbycpLFxyXG4gICAgdmlkZW9Cb3ggPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuZmVhdHVyZXNfX3BsYXllcicpLFxyXG4gICAgcGxheUJ0biA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5mZWF0dXJlc19fcGxheWVyLWJ0bicpLFxyXG4gICAgcGxheVRpbWUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucGxheWVyX190aW1lLW5vdycpLFxyXG4gICAgZnVsbFRpbWUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucGxheWVyX190aW1lLWZ1bGwnKSxcclxuICAgIHByb2dyZXNzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnBsYXllcl9fcHJvZ3Jlc3MnKSxcclxuICAgIHByb2dyZXNzTGluZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wbGF5ZXJfX3Byb2dyZXNzLWxpbmUnKSxcclxuICAgIHByb2dyZXNzSG92ZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucGxheWVyX19wcm9ncmVzcy1ob3ZlcicpLFxyXG4gICAgcGxheUIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucGxheWVyX19wbGF5T3JQYXVzZS1wbGF5JyksXHJcbiAgICBwYXVzZUIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucGxheWVyX19wbGF5T3JQYXVzZS1wYXVzZScpLFxyXG4gICAgc3RvcEIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucGxheWVyX19zdG9wJyksXHJcbiAgICBzcGVlZERvd24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucGxheWVyX19zcGVlZC1kb3duJyksXHJcbiAgICBzcGVlZFVwID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnBsYXllcl9fc3BlZWQtdXAnKSxcclxuICAgIHZvbHVtZU9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnBsYXllcl9fdm9sdW1lLW9uJyksXHJcbiAgICB2b2x1bWVPZmYgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucGxheWVyX192b2x1bWUtb2ZmJyksXHJcbiAgICB2b2x1bWVMZXZlbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wbGF5ZXJfX3ZvbHVtZS1sZXZlbCcpLFxyXG4gICAgZG93bmxvYWQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucGxheWVyX19kb3dubG9hZCcpLFxyXG4gICAgem9vbUluID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnBsYXllcl9fem9vbS1pbicpLFxyXG4gICAgem9vbU91dCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wbGF5ZXJfX3pvb20tb3V0Jyk7XHJcblxyXG5sZXQgc3BlZWQgPSAxLFxyXG4gICAgcGxheVQsXHJcbiAgICBjbGlja0Rpc3BsYXkgPSAwLFxyXG4gICAgdmlkZW9TcmMgPSB2aWRlby5nZXRBdHRyaWJ1dGUoJ3NyYycpO1xyXG5kb3dubG9hZC5zZXRBdHRyaWJ1dGUoJ2hyZWYnLCB2aWRlb1NyYyk7XHJcbmZ1bmN0aW9uIHZpZGVvUGxheSgpIHtcclxuICAgIHZpZGVvLnBsYXkoKTtcclxuICAgIHBsYXlCLmNsYXNzTGlzdC5yZW1vdmUoJ2FjdGl2ZScpO1xyXG4gICAgcGF1c2VCLmNsYXNzTGlzdC5hZGQoJ2FjdGl2ZScpO1xyXG4gICAgYXV0b3BsYXlMKCk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIHZpZGVvUGF1c2UoKSB7XHJcbiAgICB2aWRlby5wYXVzZSgpO1xyXG4gICAgcGF1c2VCLmNsYXNzTGlzdC5yZW1vdmUoJ2FjdGl2ZScpO1xyXG4gICAgcGxheUIuY2xhc3NMaXN0LmFkZCgnYWN0aXZlJyk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIHZpZGVvU3RvcCgpIHtcclxuICAgIHZpZGVvLnBhdXNlKCk7XHJcbiAgICB2aWRlby5jdXJyZW50VGltZSA9IDA7XHJcbiAgICBzcGVlZCA9IDE7XHJcbiAgICB2aWRlby5wbGF5YmFja1JhdGUgPSBzcGVlZDtcclxuICAgIHBhdXNlQi5jbGFzc0xpc3QucmVtb3ZlKCdhY3RpdmUnKTtcclxuICAgIHBsYXlCLmNsYXNzTGlzdC5hZGQoJ2FjdGl2ZScpO1xyXG4gICAgcHJvZ3Jlc3NMaW5lLnN0eWxlLndpZHRoID0gXCIwXCI7XHJcbiAgICBjbGVhclRpbWVvdXQocGxheVQpO1xyXG59XHJcblxyXG5mdW5jdGlvbiBzcGVlZFUoKSB7XHJcbiAgICBzcGVlZCAqPSAyO1xyXG4gICAgaWYgKHNwZWVkID4gNSkge1xyXG4gICAgICAgIHNwZWVkID0gNDtcclxuICAgIH1cclxuICAgIHZpZGVvLnBsYXliYWNrUmF0ZSA9IHNwZWVkO1xyXG59XHJcbmZ1bmN0aW9uIHNwZWVkRCgpIHtcclxuICAgIHNwZWVkIC89IDI7XHJcbiAgICBpZiAoc3BlZWQgPCAwLjIpIHtcclxuICAgICAgICBzcGVlZCA9IDAuMjU7XHJcbiAgICB9XHJcbiAgICB2aWRlby5wbGF5YmFja1JhdGUgPSBzcGVlZDtcclxufVxyXG5mdW5jdGlvbiB0aW1lSW5TZWNvbmQoZXZlbikge1xyXG4gICAgbGV0IGhvdXIgPSBNYXRoLmZsb29yKGV2ZW4gLyAzNjApIDwgMTAgPyBgMCR7TWF0aC5mbG9vcihldmVuIC8gMzYwKX1gIDogTWF0aC5mbG9vcihldmVuIC8gMzYwKSxcclxuICAgICAgICBtaW51dGVzID0gTWF0aC5mbG9vcihldmVuIC8gNjApIDwgMTAgPyBgMCR7TWF0aC5mbG9vcihldmVuIC8gNjApfWAgOiBNYXRoLmZsb29yKGV2ZW4gLyA2MCksXHJcbiAgICAgICAgc2Vjb25kcyA9IE1hdGguZmxvb3IoZXZlbiAlIDYwKSA8IDEwID8gYDAke01hdGguZmxvb3IoZXZlbiAlIDYwKX1gIDogTWF0aC5mbG9vcihldmVuICUgNjApO1xyXG4gICAgaWYgKGhvdXIgPT0gMCkge1xyXG4gICAgICAgIHJldHVybiBgICR7bWludXRlc30gOiAke3NlY29uZHN9IGA7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICAgIHJldHVybiBgJHtob3VyfSA6ICR7bWludXRlc30gOiAke3NlY29uZHN9IGA7XHJcbiAgICB9XHJcbn1cclxuZnVuY3Rpb24gY2xpY2soKSB7XHJcbiAgICBpZiAoY2xpY2tEaXNwbGF5ID09IDApIHtcclxuICAgICAgICBjbGlja0Rpc3BsYXkgPSAxXHJcbiAgICB9IGVsc2UgY2xpY2tEaXNwbGF5ID0gMFxyXG59XHJcblxyXG5mdW5jdGlvbiB2aWRlb1ZvbHVtZShsZXZlbCkge1xyXG4gICAgbGV2ZWwgPSBsZXZlbCA9PSB1bmRlZmluZWQgPyB2b2x1bWVMZXZlbC52YWx1ZSA6IGxldmVsO1xyXG4gICAgdmlkZW8udm9sdW1lID0gbGV2ZWwgLyAxMDA7XHJcbn1cclxuZnVuY3Rpb24gYXV0b3BsYXlMKCkge1xyXG4gICAgcHJvZ3Jlc3NMaW5lLnN0eWxlLndpZHRoID0gYCR7KHZpZGVvLmN1cnJlbnRUaW1lICogMTAwKSAvIHZpZGVvLmR1cmF0aW9ufSVgO1xyXG4gICAgcGxheVRpbWUuaW5uZXJIVE1MID0gYCR7dGltZUluU2Vjb25kKE1hdGguZmxvb3IodmlkZW8uY3VycmVudFRpbWUpKX1gO1xyXG5cclxuICAgIGlmICh2aWRlby5jdXJyZW50VGltZSA9PSB2aWRlby5kdXJhdGlvbikge1xyXG4gICAgICAgIHZpZGVvU3RvcCgpXHJcbiAgICAgICAgY2xlYXJUaW1lb3V0KHBsYXlUKTtcclxuICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICB9XHJcbiAgICBwbGF5VCA9IHNldFRpbWVvdXQoYXV0b3BsYXlMLCAxMDAwKTtcclxuXHJcbn1cclxuZnVuY3Rpb24gcGxheUwoZXZlbikge1xyXG4gICAgbGV0IHcgPSBwcm9ncmVzcy5vZmZzZXRXaWR0aCxcclxuICAgICAgICBlID0gZXZlbi5vZmZzZXRYO1xyXG4gICAgcHJvZ3Jlc3NMaW5lLnN0eWxlLndpZHRoID0gYCR7KGUgKiAxMDApIC8gd30lYDtcclxuICAgIHZpZGVvLmN1cnJlbnRUaW1lID0gdmlkZW8uZHVyYXRpb24gKiAoZSAvIHcpO1xyXG59XHJcbnBsYXlCdG4uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcclxuICAgIGZ1bGxUaW1lLmlubmVySFRNTCA9IHRpbWVJblNlY29uZChNYXRoLmZsb29yKHZpZGVvLmR1cmF0aW9uKSk7XHJcbiAgICBwbGF5QnRuLmNsYXNzTGlzdC5hZGQoJ2FjdGl2ZScpO1xyXG4gICAgc2V0VGltZW91dCgoKSA9PiB7IHBhbmVsLmNsYXNzTGlzdC5hZGQoJ2FjdGl2ZScpIH0sIDUwMCk7XHJcbiAgICBzZXRUaW1lb3V0KHZpZGVvUGxheSwgNTAwKTtcclxuICAgIHZpZGVvVm9sdW1lKCk7XHJcbiAgICBhdXRvcGxheUwoKTtcclxuICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJrZXlkb3duXCIsIChlKSA9PiB7XHJcbiAgICAgICAgaWYgKGUua2V5Q29kZSA9PSAzMiApIHtcclxuICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgICAgICBpZiAoY2xpY2tEaXNwbGF5ID09IDApIHtcclxuICAgICAgICAgICAgICAgIHZpZGVvUGF1c2UoKTtcclxuICAgICAgICAgICAgICAgIGNsaWNrKCk7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICB2aWRlb1BsYXkoKTtcclxuICAgICAgICAgICAgICAgIGNsaWNrKCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9IFxyXG4gICAgfSlcclxufSwgZmFsc2UpXHJcbnZpZGVvLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xyXG4gICAgaWYgKGNsaWNrRGlzcGxheSA9PSAwKSB7XHJcbiAgICAgICAgY2xpY2soKTtcclxuICAgICAgICB2aWRlb1BhdXNlKCk7XHJcbiAgICB9IGVsc2UgaWYgKGNsaWNrRGlzcGxheSA9PSAxKSB7XHJcbiAgICAgICAgY2xpY2soKTtcclxuICAgICAgICB2aWRlb1BsYXkoKTtcclxuICAgIH1cclxufSlcclxuXHJcbnZpZGVvLmFkZEV2ZW50TGlzdGVuZXIoJ2RibGNsaWNrJywgKGUpID0+IHtcclxuICAgIGxldCByZWN0ID0gdmlkZW8uZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCksXHJcbiAgICAgICAgbGVmdCA9IHJlY3QubGVmdDtcclxuICAgIGlmIChlLmNsaWVudFggPiBsZWZ0ICYmIGUuY2xpZW50WCA8IGlubmVyV2lkdGggLyAyKSB7XHJcbiAgICAgICAgdmlkZW8uY3VycmVudFRpbWUgLT0gMTBcclxuICAgIH0gZWxzZSBpZiAoZS5jbGllbnRYIDwgaW5uZXJXaWR0aCAtIGxlZnQgJiYgZS5jbGllbnRYID4gaW5uZXJXaWR0aCAvIDIpIHtcclxuICAgICAgICB2aWRlby5jdXJyZW50VGltZSArPSAxMFxyXG4gICAgfVxyXG5cclxufSlcclxuXHJcbnBhdXNlQi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcclxuICAgIHZpZGVvUGF1c2UoKTtcclxuICAgIGNsZWFyVGltZW91dChwbGF5VCk7XHJcbiAgICBjbGljaygpO1xyXG59KVxyXG5cclxucGxheUIuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XHJcbiAgICB2aWRlb1BsYXkoKTtcclxuICAgIGF1dG9wbGF5TCgpO1xyXG4gICAgY2xpY2soKTtcclxufSlcclxuXHJcbnN0b3BCLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xyXG4gICAgdmlkZW9TdG9wKCk7XHJcbn0pXHJcblxyXG5zcGVlZERvd24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XHJcbiAgICBzcGVlZEQoKTtcclxufSlcclxuc3BlZWRVcC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcclxuICAgIHNwZWVkVSgpO1xyXG59KVxyXG5cclxudm9sdW1lTGV2ZWwuYWRkRXZlbnRMaXN0ZW5lcignY2hhbmdlJywgKCkgPT4ge1xyXG4gICAgdmlkZW9Wb2x1bWUodm9sdW1lTGV2ZWwudmFsdWUpO1xyXG4gICAgaWYgKHZvbHVtZUxldmVsLnZhbHVlID09IDApIHtcclxuICAgICAgICB2b2x1bWVPbi5jbGFzc0xpc3QucmVtb3ZlKCdhY3RpdmUnKTtcclxuICAgICAgICB2b2x1bWVPZmYuY2xhc3NMaXN0LmFkZCgnYWN0aXZlJyk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICAgIHZvbHVtZU9mZi5jbGFzc0xpc3QucmVtb3ZlKCdhY3RpdmUnKTtcclxuICAgICAgICB2b2x1bWVPbi5jbGFzc0xpc3QuYWRkKCdhY3RpdmUnKTtcclxuICAgIH1cclxufSlcclxuXHJcbnZvbHVtZU9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xyXG4gICAgdmlkZW9Wb2x1bWUoMCk7XHJcbiAgICB2b2x1bWVPbi5jbGFzc0xpc3QucmVtb3ZlKCdhY3RpdmUnKTtcclxuICAgIHZvbHVtZU9mZi5jbGFzc0xpc3QuYWRkKCdhY3RpdmUnKTtcclxufSlcclxuXHJcbnZvbHVtZU9mZi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcclxuICAgIHZpZGVvVm9sdW1lKHZvbHVtZUxldmVsLnZhbHVlKTtcclxuICAgIHZvbHVtZU9mZi5jbGFzc0xpc3QucmVtb3ZlKCdhY3RpdmUnKTtcclxuICAgIHZvbHVtZU9uLmNsYXNzTGlzdC5hZGQoJ2FjdGl2ZScpO1xyXG59KVxyXG5cclxucHJvZ3Jlc3MuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoZSkgPT4ge1xyXG4gICAgaWYgKGNsaWNrRGlzcGxheSA9PSAwKSB7XHJcbiAgICAgICAgdmlkZW9QYXVzZSgpO1xyXG4gICAgICAgIHBsYXlMKGUpO1xyXG4gICAgICAgIHZpZGVvUGxheSgpO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgICBwbGF5TChlKTtcclxuICAgIH1cclxuXHJcbn0pXHJcblxyXG5wcm9ncmVzcy5hZGRFdmVudExpc3RlbmVyKCdtb3VzZW1vdmUnLCAoZSkgPT4ge1xyXG4gICAgcHJvZ3Jlc3NIb3Zlci5zdHlsZS53aWR0aCA9IGAkeyhlLm9mZnNldFggKiAxMDApIC8gcHJvZ3Jlc3Mub2Zmc2V0V2lkdGh9JWA7XHJcbn0pXHJcbnByb2dyZXNzLmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlbGVhdmUnLCAoZSkgPT4ge1xyXG4gICAgcHJvZ3Jlc3NIb3Zlci5zdHlsZS53aWR0aCA9IGAwJWA7XHJcbn0pXHJcblxyXG56b29tSW4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBmdW5jdGlvbiAoKSB7XHJcbiAgICB0b2dnbGVTY3JlZW4oKTsgXHJcbn0pXHJcbnpvb21PdXQuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBmdW5jdGlvbiAoKSB7XHJcbiAgICB0b2dnbGVTY3JlZW4oKTsgXHJcbn0pXHJcbmRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2Z1bGxzY3JlZW5jaGFuZ2UnLCAoKT0+IHtcclxuICAgIGlmIChkb2N1bWVudC5mdWxsc2NyZWVuRW5hYmxlZCkge1xyXG4gICAgICAgIHpvb21Jbi5jbGFzc0xpc3QudG9nZ2xlKCdhY3RpdmUnKTtcclxuICAgICAgICB6b29tT3V0LmNsYXNzTGlzdC50b2dnbGUoJ2FjdGl2ZScpO1xyXG4gICAgfVxyXG4gICAgY29uc29sZS5sb2coZG9jdW1lbnQuZnVsbHNjcmVlbkVuYWJsZWQgICk7XHJcbn0pXHJcblxyXG5mdW5jdGlvbiB0b2dnbGVTY3JlZW4oKSB7XHJcbiAgICAgXHJcbiAgICBpZiAoIWRvY3VtZW50LmZ1bGxzY3JlZW5FbGVtZW50KSB7XHJcbiAgICAgICAgdmlkZW9Cb3gucmVxdWVzdEZ1bGxzY3JlZW4oKTsgXHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICAgIGlmIChkb2N1bWVudC5mdWxsc2NyZWVuRW5hYmxlZCkge1xyXG4gICAgICAgICAgICBkb2N1bWVudC5leGl0RnVsbHNjcmVlbigpOyBcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn0iXX0=
